# This file only running single dgraph and web-base gui ratel
# image: https://hub.docker.com/r/dgraph/standalone
# docs: https://dgraph.io/docs/deploy/installation/single-host-setup

version: '3.8'

services:
  ratel:
    image: dgraph/ratel:latest
    container_name: ${W9_ID}
    ports:
      - ${W9_HTTP_PORT_SET}:8000
    env_file: .env

  dgraph:
    image: $W9_REPO:${W9_VERSION}
    container_name: ${W9_ID}-dgraph
    volumes:
      - dgraph:/dgraph
    ports:
      - ${W9_DGRAPH_GraphQL_PORT_SET}:8080
      - ${W9_DGRAPH_gRPC2_PORT_SET}:9080
    restart: on-failure

networks:
  default:
    name: ${W9_NETWORK}
    external: true

volumes:
  dgraph:
