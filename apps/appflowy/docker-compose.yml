# image: https://hub.docker.com/r/appflowyio/appflowy_client/
# docs: https://docs.appflowy.io/docs/appflowy/install-appflowy/installation-methods/installing-with-docker
# docker-compose: https://github.com/AppFlowy-IO/appflowy/blob/main/frontend/scripts/docker-buildfiles/docker-compose.yml

version: '3.8'

services:
  appflowy:
    image: ${W9_REPO}:${W9_VERSION}
    stdin_open: true
    container_name: $W9_ID
    # tty: true
    devices:
      - /dev/dri:/dev/dri
    environment:
      - DISPLAY=$DISPLAY
      - NO_AT_BRIDGE=1
    volumes:
      - /root/.Xauthority:/root/.Xauthority:rw
      - /tmp/.X11-unix:/tmp/.X11-unix
      - /dev/dri:/dev/dri
      - /var/run/dbus/system_bus_socket:/var/run/dbus/system_bus_socket
      - appflowy-data:/home/appflowy
    network_mode: host

networks:
  default:
    name: $W9_NETWORK
    external: true

volumes:
  appflowy-data: